# 83.10 DNS and Naming Resolution Tests (lab.local, Forwarders, Reverse Lookups)

Document ID: `docs/83-PrePhase-Integration/83.10-DNS-and-Naming-Resolution-Tests`  
Version: `v1.0`  
Date: `2026-02-10`  
Owner: `Platform Ops / AD-DNS Admin`  
Status: `Mandatory pre-phase verification`

## Purpose
Deterministic DNS validation for LAN-only platform naming, forward/reverse lookup correctness, and forwarder behavior.

## Inputs (example rollout)
- Domain: `lab.local`
- Primary DNS: `10.10.5.160` (`dns01.lab.local`)
- AI-DATA01: `ai-data01.lab.local` -> `10.10.5.178`
- AI-FRONTEND01: `ai-frontend01.lab.local` -> `10.10.5.179`
- LLM: `ai-llm01.lab.local` -> `10.10.5.177`
- Gateway FQDN: `api.lab.local`
- Frontend FQDN: `ui.lab.local`

## Required Record Baseline
- A records: `ai-data01`, `ai-frontend01`, `ai-llm01`, `api`, `ui`.
- PTR records for core VM IPs in `10.10.5.0/24` reverse zone.

## Repo Automation
- Inputs: `infrastructure/prephase/tests/83.10-dns-inputs.env.example`
- Runner: `infrastructure/prephase/tests/83.10-dns-resolution-tests.sh`
- Evidence checklist: `infrastructure/prephase/tests/83.10-evidence-checklist.md`

## Execution
1. Copy and fill env file.
2. Run from an admin node with SSH access to AI-DATA01, AI-FRONTEND01, and LLM:
   - `bash infrastructure/prephase/tests/83.10-dns-resolution-tests.sh --env-file infrastructure/prephase/tests/83.10-dns-inputs.env`
3. On Windows DNS admin host, run forwarder/recursion checks and attach screenshots/outputs.

## Mandatory Checks
1. Resolver config on each VM (`resolvectl status`).
2. Forward lookups for all core names (`getent`, `dig`, Windows `Resolve-DnsName`).
3. Reverse lookups for core IPs (`dig -x`, Windows PTR query).
4. Forwarders/recursion policy documented and aligned to LAN-only design.

## Completion
All forward and reverse DNS checks pass, and DNS forwarder policy evidence is attached to pre-phase pack.
