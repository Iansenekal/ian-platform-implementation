# 81.40 Proxmox Host Networking Design

Document ID: `docs/81-Proxmox-Host/81.40-Networking-Bridge-VLAN-Design`  
Version: `v1.1`  
Date: `2026-02-10`  
Owner: `Infrastructure / Platform Ops`

## Purpose
Define Proxmox target network design: vmbr0 baseline, optional VLAN expansion, management separation options, and LAN-only routing assumptions.

## Scope
Design and target-state reference. Implementation steps are handled in 81.50.

## Hard Requirements
- LAN-only platform.
- No public exposure.
- Deterministic IP plan.
- Allowlisted management access.
- Verification gates before proceeding.

## 1) Baseline vmbr0 Design (lab default)
- Single Linux bridge (`vmbr0`) attached to one physical NIC (example: `eno1`).
- Proxmox management IP on `vmbr0` with static addressing.
- Platform VMs connected to `vmbr0` in LAN subnet.
- Deny-by-default enforced with perimeter + VM/service controls.

Lab assumptions:
- LAN CIDR: `10.10.5.0/24`
- Gateway: `10.10.5.1`
- DNS: `10.10.5.160`
- No WAN NAT/port-forward into platform subnets.
- Admin workstations are allowlisted.

## 2) Optional VLAN Expansion (client-ready)
Two supported models:
- Access model: one bridge per VLAN (example: `vmbr0` servers, `vmbr1` mgmt).
- Trunk model: VLAN-aware bridge and per-VM tag assignment.

Suggested VLANs:
| VLAN | Name | Purpose | Example CIDR |
|---|---|---|---|
| 10 | MGMT | Proxmox UI/SSH/iDRAC | `10.10.10.0/24` |
| 20 | SERVERS | Core platform services | `10.10.20.0/24` |
| 30 | USERS | User endpoints | `10.10.30.0/24` |

## 3) Management Separation Options
- Preferred: dedicated MGMT VLAN/subnet with strict allowlist.
- Lab baseline: same subnet with strict allowlist for ports `8006` and `22`.

## 4) Routing Assumptions (LAN-only)
- Default route via LAN gateway unless segmented VLAN routing is used.
- No inbound internet routing to platform networks.
- Inter-VLAN routing controlled at firewall.
- DNS resolution stays internal (`lab.local`).
- Optional internet egress for updates is controlled and logged.

## 5) Design Approval Gates
All must be documented:
- vmbr0 baseline or VLAN design with explicit IDs/subnets.
- Management separation method.
- Admin workstation allowlist.
- Routing assumptions and firewall behavior.
- Confirmation of no public exposure.

## Client Rollout Variables
| Variable | Client value |
|---|---|
| Proxmox management IP/CIDR | `<fill>` |
| vmbr0 physical NIC name | `<fill>` |
| Admin workstation allowlist | `<fill>` |
| Management separation method | `<fill>` |
| VLAN IDs/subnets (if used) | `<fill>` |
| Switchport mode (access/trunk) | `<fill>` |
| Inter-VLAN firewall policy | `<fill>` |
| DNS server(s) and search domain | `<fill>` |
