# 81.60 Proxmox Host Network Verification Checklist

Document ID: `docs/81-Proxmox-Host/81.60-Network-Verification-Checklist`  
Version: `v1.0`  
Date: `2026-02-10`  
Owner: `Infrastructure / Platform Ops`

## Purpose
Provide a mandatory and repeatable post-implementation verification gate for Proxmox networking, including ping/DNS checks, MAC/IP sanity checks, representative VM checks, and no-WAN-exposure confirmation.

## Scope
Proxmox host and one representative VM connectivity proof.

## Prerequisite
`81.50` networking implementation complete.

## Lab Defaults
- Gateway: `10.10.5.1`
- DNS: `10.10.5.160`
- LAN: `10.10.5.0/24`
- Domain: `lab.local`

## 1) Record Current State (Host)
Run on Proxmox host shell and capture output:

```bash
hostname -f
ip -br addr
ip r
ip -br link
cat /etc/resolv.conf
cat /etc/network/interfaces
```

## 2) Host Ping Tests

```bash
ping -c 3 10.10.5.1
ping -c 3 10.10.5.160
ping -c 3 <known-lan-host>
```

Pass: `0% packet loss` for each test.

## 3) Host DNS Tests

```bash
getent hosts dns01.lab.local || true
getent hosts "$(hostname -f)" || true
getent hosts 10.10.5.160 || true
```

Pass:
- Internal DNS name resolves.
- Proxmox hostname resolves to management IP.
- Reverse lookup returns name when PTR records exist.

## 4) MAC/IP Sanity

```bash
ip -br addr | grep -E "vmbr0"
bridge link
ip link show vmbr0
ip link show <physical_nic>
```

Pass:
- `vmbr0` has expected static IP/CIDR.
- Physical NIC is enslaved to `vmbr0`.
- Bridge and NIC are `UP`.

VM MAC uniqueness spot check (UI):
- `Datacenter -> <VM> -> Hardware -> Network Device`
- Confirm each VM NIC has unique MAC.

## 5) Representative VM Connectivity
Run inside representative VM:

```bash
ip -br addr
ip r | head
ping -c 3 10.10.5.1
ping -c 3 10.10.5.160
getent hosts dns01.lab.local || true
```

Pass:
- Expected VM IP and route.
- Gateway and DNS reachable.
- Internal DNS resolution works.

## 6) No WAN Exposure Checks
Perimeter/firewall validation:
- No NAT/port-forward rules to Proxmox management ports (`8006`, `22`).
- No WAN-to-LAN allow rules for management subnet.
- Remote admin, if required, is VPN+MFA only.

Host listener sanity:

```bash
ss -tulpen | grep -E ":8006\\b|:22\\b"
ip r | grep default
```

Pass:
- Only expected management listeners on host.
- No unexpected external-facing service exposure.

## 7) Admin Workstation Access
- Browser login to `https://<pve-ip>:8006` succeeds.
- `ping <pve-ip>` succeeds.
- `nslookup <pve-hostname>` resolves correctly (if internal DNS exists).

## 8) Final Sign-off Gate
- Proxmox host pings gateway and DNS.
- Proxmox host resolves internal DNS names.
- `vmbr0` IP/port/UP-state validated.
- Representative VM proves LAN + DNS connectivity.
- No WAN port-forwarding/NAT exposes management.
- Evidence captured and stored.

## 9) Evidence Pack Requirements
- Section 1 command outputs.
- Ping test outputs (host + representative VM).
- DNS test outputs (host + representative VM).
- Proxmox Network page screenshot showing `vmbr0`.
- Written no-WAN-exposure confirmation with firewall reference.

## 10) Client Rollout Variables
| Variable | Client value |
|---|---|
| Proxmox management IP/CIDR | `<fill>` |
| Gateway | `<fill>` |
| DNS server(s) | `<fill>` |
| Admin workstation allowlist | `<fill>` |
| Representative VM name and IP | `<fill>` |
| No-WAN exposure confirmation method | `<fill>` |
