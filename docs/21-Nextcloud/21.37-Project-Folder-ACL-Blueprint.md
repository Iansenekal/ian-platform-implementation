# AI Platform Deployment Documentation
## 21.37 Nextcloud - Project Folder + ACL Blueprint (Canonical Template)

LAN-only - POPIA-friendly - Two-VM on Proxmox - Ubuntu 24.04

Document Control
- Document ID: `docs/21-Nextcloud/21.37-Project-Folder-ACL-Blueprint`
- Filename: `docs/21-Nextcloud/21.37-Project-Folder-ACL-Blueprint.md`
- Version: `v1.0`
- Date: `2026-02-09`
- Owner: Choice IT / Governance + Security Architecture
- Status: Mandatory - required before project onboarding
- Scope: Project workspace structure + ACL blueprint for Nextcloud
- Hard requirements: deny-by-default at root; group-based permissions; explicit read-only; minimal exceptions; auditability
- Related docs: `21.35`, `21.36`, `21.38`, `30.15`
- Applies to: all Nextcloud projects
- Evidence requirement: folder evidence + access tests + audit evidence
- Default projects root: `/Projects`
- Note: blueprint drives Search/KG visibility; broken inheritance increases leakage risk

## 1. Objectives and Non-Negotiables
- consistent folder model across projects
- predictable, group-based project visibility
- ACL inheritance by default
- sensitive-folder isolation only when approved
- external sharing disabled by default
- Search/KG must inherit same permission boundaries

## 2. Canonical Projects Root Layout
Recommended roots:
- `/Projects`
- `/Templates`
- `/Shared-ReadOnly` (optional)

Policy:
- `/Projects` is never broadly shared
- grants are per-project folder
- `/Templates` is controlled and read-only for template consumers

Example:

```text
/Projects/
  /BANANAPEEL/
  /NIGHTPENG/
  /DADJOKE/
  /LASAGNA/
  /MCHUCK/
/Templates/
/Shared-ReadOnly/
```

## 3. Per-Project Folder Template
Standard tree:

```text
/Projects/<PROJECTCODE>/
  00-Project-Home/
  01-Admin/
    01.10-Meetings-Minutes/
    01.20-Comms/
    01.30-Action-Register/
    01.40-Stakeholders/
  02-Technical/
    02.10-Architecture/
    02.20-Configs/
    02.30-Runbooks/
    02.40-Diagrams/
  03-Data/
    03.10-Inputs/
    03.20-Exports/
    03.30-Reports/
  04-Deliverables/
    04.10-Drafts/
    04.20-Final/
  05-Compliance/
    05.10-Risk-Register/
    05.20-POPIA/
    05.30-Audit-Evidence/
  06-Archive/
```

Optional folders by approved need:
- `07-Finance`
- `08-Legal`
- `09-HR`

## 4. ACL Model and Inheritance Rules
Required project groups:
- `AI-NC-PROJ-<PROJECTCODE>-OWNER`
- `AI-NC-PROJ-<PROJECTCODE>-EDIT`
- `AI-NC-PROJ-<PROJECTCODE>-VIEW`

Root ACL baseline:
- OWNER: manage project scope, internal sharing, external sharing only by exception
- EDIT: upload/edit within scope, policy-limited delete
- VIEW: read-only, no upload/edit/delete/share

Inheritance:
- default ON from project root to operational subfolders
- no inheritance breaks unless approved sensitive-folder isolation exists

Forbidden patterns:
- broad share of `/Projects` root
- per-user project-root grants
- default public-link sharing
- overlapping unclear group taxonomy

## 5. Sensitive Subfolder Isolation Pattern
Use only with approved business case.

Finance example:
- break inheritance at `07-Finance`
- apply restricted groups:
  - `AI-NC-PROJ-<PROJECTCODE>-FINANCE-EDIT`
  - `AI-NC-PROJ-<PROJECTCODE>-FINANCE-VIEW`
- default project VIEW group does not inherit this folder unless explicitly granted

Legal hold:
- isolate under `06-Archive` or `08-Legal`
- use `AI-NC-PROJ-<PROJECTCODE>-LEGALHOLD` where needed

## 6. Service Account Access
- Search/KG indexer is read-only and ACL-aware
- automation accounts scoped to minimum required folders
- no service-account write access for indexer
- no interactive login for service accounts

Recommended examples:
- `AI-SVC-SEARCH-NC-INDEXER`
- `AI-SVC-AUTOMATION-N8N-NC`
- `AI-SVC-AUTOMATION-WINDMILL-NC`

## 7. Onboarding Workflow
1. Governance assigns and records project code.
2. Platform admin creates project folder from template and applies root groups.
3. Project owner validates OWNER/EDIT/VIEW membership and approves isolation exceptions.
4. Security validates deny-by-default and sharing defaults.
5. Search/KG onboarding starts only after ACL verification.

## 8. Verification Checklist
- user without project group cannot see project folder
- VIEW can read but cannot upload/edit/delete
- EDIT can upload/edit in scope
- OWNER governs project membership process, without platform-admin escalation
- if isolation is enabled, default VIEW cannot see isolated folder
- Search/KG only returns items visible in Nextcloud ACL scope

## 9. Client Rollout Variables
- projects root and templates root
- project numbering enabled
- project code format policy
- required groups (OWNER/EDIT/VIEW)
- inheritance defaults and isolation exception policy
- optional finance/legal groups
- sharing exception workflow
- service account names and scopes
- onboarding checklist owner and review cadence
- indexing start gate after ACL validation
