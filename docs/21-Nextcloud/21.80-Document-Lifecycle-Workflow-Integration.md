# AI Platform Deployment Documentation
## 21.80 Nextcloud - Document Lifecycle and Workflow Integration

LAN-only - POPIA-friendly - Evidence-Pack ready - Approvals + eSign integration

Document Control
- Document ID: `docs/21-Nextcloud/21.80-Document-Lifecycle-Workflow-Integration`
- Filename: `docs/21-Nextcloud/21.80-Document-Lifecycle-Workflow-Integration.md`
- Version: `v1.0`
- Date: `2026-02-10`
- Owner: Platform Ops + Compliance
- Status: Operational design standard
- Hard requirements: least privilege; audit trail; data minimization; explicit `Approve/Reject`; no secrets in files
- Related docs: `21.37`, `21.45`, `21.60`, `70.*`, `71.*`

## 1. Purpose
- define draft -> review -> approval -> signed -> archived flow
- standardize workflow approvals and evidence capture
- enforce post-sign-off sealing controls

## 2. Scope
- project lifecycle folders (`Drafts`, `InReview`, `Approved`, `Signed`, `Archive`, `Evidence-Pack`)
- workflow trigger points and approval transitions
- evidence artifact storage and audit proof
- management approval chains with explicit `Approve/Reject`

## 3. Key Concepts
- lifecycle states: `Draft`, `In Review`, `Approved`, `Signed`, `Archived`
- evidence pack as immutable compliance bundle
- file hashing for integrity per version
- explicit approval actions at every approval step

## 4. Standard Folder Layout
Under `/Projects/<PROJECTCODE>/`:
- `01-Drafts/`
- `02-InReview/`
- `03-Approved/`
- `04-Signed/`
- `05-Archive/`
- `99-Evidence-Pack/`

## 5. Permissions Model by Lifecycle Folder
- Drafts: writers edit; reviewers read; approvers/auditors read
- InReview: reviewer workflow access; controlled write
- Approved: restricted write for workflow/compliance transition only
- Signed: final outputs written once then read-only
- Archive: read-only for normal users; archive role/compliance mutation only
- Evidence-Pack: write by workflow/compliance only, then sealed read-only

## 6. Workflow Integration Points
Creation/classification:
1. upload/create in `01-Drafts`
2. apply metadata (type/owner/sensitivity/retention class)
3. emit `DOC_CREATED` audit event

Review:
4. submit for review from workflow UI
5. create immutable snapshot/version for `02-InReview`
6. assign reviewer group and notify
7. reject returns to draft with reason category
8. complete review advances to approval stage

Approval chain:
9. issue approval request to first approver
10. approver acts using authenticated `Approve` or `Reject`
11. approve advances chain; reject returns with reason required
12. write per-step receipt to evidence pack

Final signing/sealing:
13. final approval generates signed output to `04-Signed`
14. record hash/signature metadata
15. finalize and seal `99-Evidence-Pack`

## 7. Evidence-Pack Minimum Contents
- approval chain receipts (actor, role/group, timestamp, outcome)
- hash manifest (document/version/algorithm/hash)
- signature manifest and verification status
- notification audit summary (no secret token values)
- exception/override records and approvals

## 8. POPIA and Privacy Controls
- no sensitive personal data in folder names
- minimize log free-text; use reason categories in central logs
- strict access to evidence pack
- retention classes assigned at early lifecycle stage

## 9. Search and Knowledge Graph Alignment
- lifecycle state is a search facet
- indexing respects Nextcloud ACLs
- graph/mind-map visibility remains ACL-bound
- evidence-pack content is hidden by default except compliance/audit roles

## 10. Operational Verification
- validate folder structure and ACLs on test project
- verify audit event on document create
- verify review snapshot/version behavior
- verify approve/reject paths create receipts
- verify signed/evidence folders are sealed after completion
- verify backups include evidence-pack artifacts

## 11. Client Rollout Variables
- root path and naming convention
- default approval chain by document type
- retention classes and periods
- roles/groups with Evidence-Pack access
- sealing mode for Signed and Evidence-Pack folders
