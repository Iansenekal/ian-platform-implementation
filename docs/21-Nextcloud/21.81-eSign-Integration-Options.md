# AI Platform Deployment Documentation
## 21.81 Nextcloud - eSign Integration Options

LAN-only - POPIA-friendly - Verifiable signatures - Evidence-Pack ready

Document Control
- Document ID: `docs/21-Nextcloud/21.81-eSign-Integration-Options`
- Filename: `docs/21-Nextcloud/21.81-eSign-Integration-Options.md`
- Version: `v1.0`
- Date: `2026-02-10`
- Owner: Compliance + Security + Platform
- Status: Design options (per-client selection required)
- Hard requirements: verifiable signatures; explicit approvals; auditable evidence; no cloud runtime dependency; SSO + MFA alignment
- Related docs: `70.30`, `70.40`, `70.50`, `21.80`

## 1. Decision Drivers
- legal/compliance assurance level required
- strict LAN-only runtime requirement
- identity assurance maturity (SSO/AD/MFA)
- non-repudiation/evidence expectations
- document format and signing UX constraints

## 2. Recommended Baseline
- enforce SSO + MFA at signing time
- produce immutable final PDF before signing
- apply verifiable signature or signature manifest
- store proof artifacts in `99-Evidence-Pack`
- seal `04-Signed` and `99-Evidence-Pack` after completion

## 3. Integration Options
Option A: workflow receipt + hashing (no embedded signature)
- approval via authenticated workflow step
- receipt + hash manifest evidence
- low friction, strong audit chain, not embedded PDF signature

Option B: embedded PDF signature with internal certificate (recommended where acceptable)
- internal PKI-backed signature
- high verifiability and portable validation
- requires certificate governance and key controls

Option C: per-user certificate signing
- highest assurance and strongest non-repudiation
- operationally complex enrollment/lifecycle

Option D: external qualified eSign
- not allowed for normal LAN-only runtime
- only potential controlled exception with explicit approval

## 4. Nextcloud Integration Pattern
1. finalize approved content to immutable PDF
2. trigger selected signature method
3. write final artifact to `04-Signed`
4. store evidence artifacts in `99-Evidence-Pack`
5. seal both folders read-only

Evidence by option:
- A: receipt + hash manifest + IdP session reference
- B: signed PDF + certificate chain info + verification report + hash manifest
- C: signed PDF + signer certificate metadata + revocation snapshot + verification report

## 5. Identity Assurance Requirements
- signature actions require authenticated user context
- MFA step-up required for signing/approval actions
- signer must match required role/group for approval step
- approval decisions are explicit `Approve/Reject` actions only
- break-glass signing is exception-only, logged, and approved

## 6. Certificate and Key Management (B/C)
- internal CA or client CA authority required
- certificate validity, renewal, and revocation process documented
- private key protections with strict permissions and backup controls
- certificate serial/issuer recorded into evidence pack

## 7. Verification Requirements
Auditors must be able to prove:
- exact signed document version (hash + version ID)
- signer identity and role with MFA evidence
- signing timestamp
- integrity status (signature valid or hash match)
- ordered approval-chain progression

## 8. Recommended Selection by Document Type
- internal POPIA policy sign-off: `B` (or `A` when PKI unavailable)
- safety SOP/risk assessments: `B`
- low-risk internal memos/forms: `A`
- regulated/high-assurance contracts: `C` (or controlled exception path)

## 9. Verification Checklist
- selected option is recorded per document type
- full approval chain completed and finalized artifact generated
- evidence pack contains receipt/hash/signature verification artifacts
- signed PDF (if used) validates independently on separate workstation
- Signed and Evidence-Pack folders are sealed read-only after completion

## 10. Client Rollout Variables
- signature option per document type (`A/B/C`)
- MFA enforcement at signing stage
- internal PKI availability
- certificate issuance model (service cert vs per-user cert)
- certificate validity and rotation window
- revocation method (CRL/OCSP/internal)
- sealing policy for Signed/Evidence-Pack folders
