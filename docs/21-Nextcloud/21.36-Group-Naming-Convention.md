# AI Platform Deployment Documentation
## 21.36 Nextcloud - Group Naming Convention (Canonical Taxonomy)

LAN-only - POPIA-friendly - Two-VM on Proxmox - Ubuntu 24.04

Document Control
- Document ID: `docs/21-Nextcloud/21.36-Group-Naming-Convention`
- Filename: `docs/21-Nextcloud/21.36-Group-Naming-Convention.md`
- Version: `v1.0`
- Date: `2026-02-09`
- Owner: Choice IT / Identity + Governance
- Status: Mandatory - required for all projects
- Hard requirements: predictable names; no spaces; stable codes; IdP claim mapping; Search/KG ACL alignment
- Related docs: `04.40`, `11.70`, `21.35`, `21.37`, `30.15`
- Applies to: IdP groups, AD groups, and/or Nextcloud groups by auth mode
- Evidence requirement: group export + mapping proof
- Time zone: `Africa/Johannesburg`
- Default prefix: `AI-`
- Change trigger: change-control only; renames are high-risk

## 1. Naming Goals and Constraints
- Predictable purpose from group name
- Stable over project lifetime
- Portable across AD/IdP/Nextcloud
- Machine-safe format: uppercase, hyphen-separated, no spaces
- ACL-safe for Search/KG inheritance and filtering

## 2. Canonical Patterns
Global platform groups:
- `AI-PLATFORM-ADMINS`
- `AI-PLATFORM-SECURITY`
- `AI-PLATFORM-AUDIT-READONLY`
- `AI-PLATFORM-HELPDESK` (optional)

Nextcloud platform groups:
- `AI-NC-PLATFORM-ADMINS`
- `AI-NC-AUDIT-READONLY`
- `AI-NC-HELPDESK` (optional)

Project-scoped groups:
- `AI-NC-PROJ-<PROJECTCODE>-OWNER`
- `AI-NC-PROJ-<PROJECTCODE>-EDIT`
- `AI-NC-PROJ-<PROJECTCODE>-VIEW`

Optional env suffix:
- `-LAB` or `-PROD` only when multi-environment naming is required

## 3. Project Code Standards
- Stable identifier, recommended 6-14 chars
- Character set: `A-Z0-9` only
- Do not use display/marketing names as codes
- Code does not change after project creation

Example codes:
- BANANAPEEL
- NIGHTPENG
- DADJOKE
- LASAGNA
- MCHUCK

## 4. Required Groups per Project
- OWNER
- EDIT
- VIEW

Example:
- `AI-NC-PROJ-BANANAPEEL-OWNER`
- `AI-NC-PROJ-BANANAPEEL-EDIT`
- `AI-NC-PROJ-BANANAPEEL-VIEW`

## 5. Optional Groups
- `AI-NC-PROJ-<PROJECTCODE>-CONTRIB`
- `AI-NC-PROJ-<PROJECTCODE>-AUDIT`
- `AI-NC-PROJ-<PROJECTCODE>-LEGALHOLD`

Create optional groups only when justified to avoid taxonomy sprawl.

## 6. Service Account Naming
Use `AI-SVC-` prefix and explicit purpose:
- `AI-SVC-SEARCH-NC-INDEXER`
- `AI-SVC-AUTOMATION-N8N-NC`
- `AI-SVC-AUTOMATION-WINDMILL-NC`
- `AI-SVC-BACKUP-NC`

Optional scoped suffix for dedicated project accounts: `-<PROJECTCODE>`.

## 7. Cross-App Mapping
- Gateway reads canonical groups for API authorization
- UI uses group presence for UX visibility only
- Nextcloud applies folder ACLs from same groups
- Search/KG filters by exact group strings; unauthorized nodes/edges remain hidden

## 8. Governance Rules
- Tier 0/1 approval for global/platform groups
- Project groups created during controlled onboarding
- No ad-hoc naming outside canonical patterns
- Group creation tracked with project code, owner, and purpose

## 9. Verification Checklist
- All project groups match `AI-NC-PROJ-<PROJECTCODE>-<ROLE>`
- Project codes are stable and documented
- IdP `groups` claim carries exact strings
- Search/KG ACL mapping uses same exact strings
- No orphaned groups without owner/project reference

## 10. Client Rollout Variables
- global prefix
- nextcloud prefix
- service account prefix
- project pattern and optional env suffix policy
- allowed project code charset and length
- authority for assigning project code
- group-creation authority and change-control workflow
- IdP claim name (`groups`)
- Search/KG exact-match ACL behavior
