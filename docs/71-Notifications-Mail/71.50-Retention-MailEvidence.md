# AI Platform Deployment Documentation
## 71.50 Notifications and Mail - Retention (Mail Evidence)

LAN-only - POPIA-friendly - Data minimization - Defensible evidence retention

Document Control
- Document ID: `docs/71-Notifications-Mail/71.50-Retention-MailEvidence`
- Filename: `docs/71-Notifications-Mail/71.50-Retention-MailEvidence.md`
- Version: `v1.0`
- Date: `2026-02-10`
- Owner: Compliance + Security
- Status: Retention standard (mandatory)
- Hard requirements: retain only necessary evidence; no email bodies as evidence; preserve receipts/audit events; documented purge; legal hold support
- Related docs: `03.40`, `71.40`, `70.50`, `70.40`

## 1. Retention Goals
- preserve accountability and non-repudiation for approve/reject decisions
- minimize personal information and avoid unnecessary content retention
- support audits and incident response without storing full email bodies
- enforce consistent purge and legal-hold mechanisms

## 2. Mail-Evidence Scope
- notification metadata and delivery outcomes
- action-token issuance metadata (never token values)
- approve/reject decision outcomes with identity/time metadata
- Evidence-Pack receipts linked by `correlation_id`
- SMTP relay operational logs with short retention

## 3. Must-Not-Retain Defaults
- email bodies as platform evidence
- token-bearing approval links
- optional convenience attachments
- SMTP credentials or any secret material

## 4. Storage Locations and Roles
- central logs: notification and mail audit events (SecOps/Compliance/Auditor access)
- Nextcloud Evidence-Pack: receipt and decision evidence per document/version
- SMTP relay local logs: short retention, restricted operational access
- user mailboxes: business channel only, not platform evidence-of-record

## 5. Retention Schedule Baseline
- central notification/mail audit events: default 365 days (range 180-730)
- SMTP relay local logs: default 30 days (range 14-90)
- action token metadata: default 365 days (range 180-730)
- Evidence-Pack receipts: bound to document legal/compliance retention
- delivery-failure incidents: default 365 days

## 6. Legal Hold and Exceptions
- legal hold applies to Evidence-Pack receipts and correlated audit events
- legal hold does not require retaining full email body content
- SMTP retention extensions require approved time-boxed exception
- all retention exceptions must be auditable

## 7. Purge and Disposal Rules
- purge is automated, scheduled, and auditable (`PurgeStarted` / `PurgeCompleted`)
- purge permissions restricted to authorized Compliance/SecOps admins
- central logs use lifecycle expiry controls
- SMTP relay logs rotate and purge with policy-driven retention

## 8. POPIA Privacy Controls
- prefer `recipient_count`/`recipient_hashes` over full addresses in central logs
- restrict SMTP relay log access due to address/routing metadata
- avoid message-body logging in central pipeline

## 9. Verification Checklist
1. verify central log retention lifecycle enforces expiry
2. verify SMTP relay log rotation/deletion enforces configured retention
3. verify Evidence-Pack receipts follow document retention policy
4. verify legal hold on correlation set blocks purge of required evidence
5. verify purge emits auditable events visible to auditors

## 10. Client Rollout Variables
- central audit retention days
- SMTP relay log retention days
- recipient logging mode (`count` / `hash` / `full`)
- legal hold approver group
- retention exception approver group
- purge window cadence
