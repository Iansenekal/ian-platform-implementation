# 82.10 LLM Pointer Server BIOS/UEFI + GPU Prechecks

Document ID: `docs/82-LLM-Pointer-Server/82.10-BIOS-UEFI-GPU-Prechecks`  
Version: `v1.0`  
Date: `2026-02-10`  
Owner: `AI Infrastructure / Hardware`

## Purpose
Validate firmware and hardware prerequisites for stable AMD RX 7900 XT inference runtime before Ubuntu/Ollama install.

## Scope
BIOS/UEFI settings and hardware stability prechecks.

## Prerequisites
- Physical host assembled.
- Local console access.
- Optional vendor firmware update media available.

## 1) Precheck Goals
- Virtualization and IOMMU enabled.
- Above 4G Decoding enabled.
- ReBAR enabled when stable.
- PCIe slot width/gen sane.
- Secure Boot policy explicit and documented.
- No stability faults under sustained load.

## 2) Mandatory BIOS/UEFI Intents
### CPU virtualization + IOMMU
- Intel: `VT-x` and `VT-d` enabled.
- AMD: `SVM` and `AMD-Vi/IOMMU` enabled.

### Above 4G + ReBAR
- Enable `Above 4G Decoding`.
- Enable `Resizable BAR`/`ReBAR` (or `Smart Access Memory`) when supported.

### PCIe slot/gen
- GPU in primary x16 slot.
- Start with PCIe speed `Auto`; if unstable, lock to `Gen4`.

### Boot mode + Secure Boot
- Boot mode `UEFI`.
- Choose policy:
- `A`: Secure Boot disabled until stable (recommended baseline).
- `B`: Secure Boot enabled with signed module process (MOK).

### Power/thermal
- Ensure PSU and cooling headroom for sustained GPU load.
- Disable unstable memory OC profiles if crashes occur.

## 3) Hardware Sanity
- GPU appears in BIOS PCIe list.
- RAM amount matches expected.
- CPU model matches expected.
- NVMe/SSD and NIC are detected.

## 4) Post-install Validation Plan (Executed After OS Install)
- `dmesg | grep -Ei 'DMAR|IOMMU'`
- `lspci -vv` and `lspci -k` for GPU link/driver binding.
- `mokutil --sb-state`
- `journalctl -p err -b`
- `dmesg | grep -Ei 'WHEA|MCE|AER|PCIe|error'`
- sustained GPU workload for 30 to 60 minutes without resets/throttle.

## 5) Troubleshooting Map
- Random reboots: PSU/thermals/memory profile.
- GPU missing: reseat GPU, verify BIOS settings, update firmware.
- Driver resets: disable ReBAR, lock Gen4, check ASPM.
- Secure Boot module issues: disable SB then re-enable with signed-module workflow.

## 6) Mandatory Evidence
- BIOS page photos for VT-x/VT-d, Above 4G, ReBAR, PCIe, Secure Boot.
- BIOS version and update date.
- Hardware bill:
- motherboard model
- CPU
- GPU
- RAM profile/size
- PSU model/wattage

## 7) Client Rollout Variables
| Variable | Client value |
|---|---|
| Motherboard + BIOS version | `TUF Gaming B560M-PLUS BIOS Ver.0820` |
| CPU model | `11th Gen Intel Core i5-11400 @ 2.6GHz` |
| GPU model | `AMD RX 7900 XT` |
| RAM | `DDR4 3600 32GB` |
| Secure Boot policy | `A` |
| ReBAR decision | `<fill>` |
| PCIe Gen policy | `<fill>` |

## 8) Repo Helpers
- Inputs template: `infrastructure/ollama-gpu/82.10-bios-precheck-inputs.env.example`
- Precheck checklist: `infrastructure/ollama-gpu/82.10-bios-precheck-checklist.md`
- Precheck gate script: `infrastructure/ollama-gpu/82.10-bios-precheck-gate.sh`
