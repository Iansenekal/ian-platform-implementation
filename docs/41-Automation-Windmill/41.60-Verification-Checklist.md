# AI Platform Deployment Documentation
## 41.60 Automation - Windmill (Optional) Verification Checklist (Mandatory)

LAN-only runtime - POPIA-friendly - Two-VM on Proxmox - Ubuntu 24.04

Document Control
- Document ID: `docs/41-Automation-Windmill/41.60-Verification-Checklist`
- Filename: `docs/41-Automation-Windmill/41.60-Verification-Checklist.md`
- Version: `v1.0`
- Date: `2026-02-09`
- Owner: Choice IT / Platform Ops + Security
- Status: Mandatory if Windmill is enabled
- Scope: network access, SSO/MFA, RBAC, secrets hygiene, script governance, monitoring, backup/restore
- Related docs: `41.10`, `41.20`, `41.30`, `41.50`, `03.*`, `04.*`, `50.*`, `06.*`
- Run when: initial enablement, upgrades, secret changes, permission changes, scope changes
- Evidence output: completed checklist + evidence references
- Pass criteria: all P0 pass; no open P0/P1 security defects
- Time zone: `Africa/Johannesburg`
- Approver: Security + Platform Owner
- Note: stop rollout immediately if any P0 fails

Severity legend
- P0: security-critical, platform-wide risk, production blocker
- P1: high importance, reliability blocker, must fix before go-live
- P2: important, should fix soon; proceed only with formal risk acceptance

## 1. Network Exposure and Trust Boundaries
| ID | Priority | Check | How to verify | Expected result | PASS/FAIL/NA + Evidence |
|---|---|---|---|---|---|
| NET-01 | P0 | Windmill reachable only from allowlisted sources | attempt access from allowlisted and non-allowlisted hosts | allowlisted works; non-allowlisted denied | |
| NET-02 | P0 | no direct app port exposure to LAN (proxy-only) | inspect port bindings and attempt direct LAN access | direct access fails; proxy path only | |
| NET-03 | P1 | outbound deny-by-default enforced | attempt script call to non-approved destination | blocked and logged | |

## 2. Identity, SSO, MFA, and RBAC
| ID | Priority | Check | How to verify | Expected result | PASS/FAIL/NA + Evidence |
|---|---|---|---|---|---|
| ID-01 | P0 | SSO login works via IdP | login with viewer, builder, and operator roles | login works; roles map correctly | |
| ID-02 | P0 | admin MFA enforced | login as admin without MFA completion | MFA required; recovery path available | |
| ID-03 | P0 | RBAC deny tests pass | viewer attempts admin settings and privileged job runs | denied and audited | |
| ID-04 | P1 | session timeout enforced | leave session idle beyond policy | session expires; re-auth required | |

## 3. Secrets Hygiene and Safe Execution
| ID | Priority | Check | How to verify | Expected result | PASS/FAIL/NA + Evidence |
|---|---|---|---|---|---|
| SEC-01 | P0 | no secrets in scripts, git, docs, or job outputs | run repository/log secret scans | no secrets found; evidence retained | |
| SEC-02 | P0 | host secret files have correct permissions | inspect file ownership and mode | `600 root:root`; no world-readable files | |
| SEC-03 | P1 | secret inventory is complete and accurate | compare inventory to active Windmill secrets | no unknown secrets; owners/scopes present | |
| SEC-04 | P1 | least privilege validated for service accounts | test blocked operations for service accounts | blocked ops fail; allowed ops succeed | |

## 4. Script/Job Governance and Change Control
| ID | Priority | Check | How to verify | Expected result | PASS/FAIL/NA + Evidence |
|---|---|---|---|---|---|
| JOB-01 | P1 | job catalog exists and is current | review catalog for owner/purpose/classification | complete and current catalog | |
| JOB-02 | P1 | peer review enforced for privileged scripts | inspect approvals for privileged scripts | peer review evidence exists | |
| JOB-03 | P2 | separation of duties in high-risk scripts | compare approvers vs authors | no single-point control | |

## 5. Logging, Monitoring, and Alerting
| ID | Priority | Check | How to verify | Expected result | PASS/FAIL/NA + Evidence |
|---|---|---|---|---|---|
| OBS-01 | P1 | health checks monitored | inspect monitoring target status | target up; alerts configured | |
| OBS-02 | P1 | script change and run audit events recorded | perform controlled script run/change and review logs | actor/timestamp recorded | |
| OBS-03 | P2 | alert routing tested | simulate job failure | alert delivered to ops recipients | |

## 6. Backup and Restore Readiness
| ID | Priority | Check | How to verify | Expected result | PASS/FAIL/NA + Evidence |
|---|---|---|---|---|---|
| BDR-01 | P1 | backups run successfully | review backup logs for Windmill scope | recent successful backup present | |
| BDR-02 | P1 | restore test performed in lab | perform restore from backup set | service restored and validated | |
| BDR-03 | P2 | secrets recovery validated | verify recovery of secret material under dual control | recoverable with logged evidence | |

## 7. Security Posture and Operational Readiness
| ID | Priority | Check | How to verify | Expected result | PASS/FAIL/NA + Evidence |
|---|---|---|---|---|---|
| OPS-01 | P1 | reboot resilience verified | reboot host and test service health | Windmill healthy after reboot | |
| OPS-02 | P1 | admin access limited and reviewed | review admin membership and justifications | minimal, justified admin set | |
| OPS-03 | P2 | operator runbook complete | review runbook/escalation coverage | operators can support without admin intervention | |

## Evidence Pack (Attach to Rollout Ticket)
- completed checklist with PASS/FAIL and evidence references
- UFW allowlist proof and deny-test evidence
- SSO login and MFA enforcement evidence
- secret inventory and rotation schedule
- job catalog snapshot and privileged-script approval evidence
- backup logs and restore test report
- monitoring status and alert-routing test evidence
