# AI Platform Deployment Documentation
## 40.60 Automation - n8n (Optional) Verification Checklist (Mandatory)

LAN-only runtime - POPIA-friendly - Two-VM on Proxmox - Ubuntu 24.04

Document Control
- Document ID: `docs/40-Automation-n8n/40.60-Verification-Checklist`
- Filename: `docs/40-Automation-n8n/40.60-Verification-Checklist.md`
- Version: `v1.0`
- Date: `2026-02-09`
- Owner: Choice IT / Platform Ops + Security
- Status: Mandatory if n8n is enabled
- Scope: network access, SSO/MFA, RBAC, secrets hygiene, workflow governance, monitoring, backup/restore
- Related docs: `40.10`, `40.20`, `40.30`, `40.50`, `03.*`, `04.*`, `50.*`, `06.*`
- Run when: initial enablement, upgrades, credential changes, scope changes
- Evidence output: completed checklist + evidence references
- Pass criteria: all P0 pass; no open P0/P1 security defects
- Time zone: `Africa/Johannesburg`
- Approver: Security + Platform Owner
- Note: stop rollout immediately if any P0 fails

Severity legend
- P0: security-critical, platform-wide risk, production blocker
- P1: high importance, reliability blocker, must fix before go-live
- P2: important, should fix soon; proceed only with formal risk acceptance

## 1. Network Exposure and Trust Boundaries
| ID | Priority | Check | How to verify | Expected result | PASS/FAIL/NA + Evidence |
|---|---|---|---|---|---|
| NET-01 | P0 | n8n reachable only from allowlisted sources | attempt access from allowlisted and non-allowlisted hosts | allowlisted works; non-allowlisted denied | |
| NET-02 | P0 | no direct container port exposure to LAN (`5678`) | inspect bindings and attempt direct LAN access | direct access fails; reverse proxy path only | |
| NET-03 | P1 | outbound deny-by-default enforced | attempt workflow call to non-approved destination | blocked and logged | |

## 2. Identity, SSO, MFA, and RBAC
| ID | Priority | Check | How to verify | Expected result | PASS/FAIL/NA + Evidence |
|---|---|---|---|---|---|
| ID-01 | P0 | SSO login works via IdP | login with standard user and operator | login works; roles map correctly | |
| ID-02 | P0 | admin MFA enforced | login as admin without MFA completion | MFA required; recovery path available | |
| ID-03 | P0 | RBAC deny tests pass | standard user attempts admin pages/actions | denied and audited | |
| ID-04 | P1 | session timeout enforced | leave session idle beyond policy | session expires; re-auth required | |

## 3. Secrets and Credentials Hygiene
| ID | Priority | Check | How to verify | Expected result | PASS/FAIL/NA + Evidence |
|---|---|---|---|---|---|
| SEC-01 | P0 | no secrets in git/docs/compose | run repository/config secret scans | no secrets found; evidence retained | |
| SEC-02 | P0 | host secret files have correct permissions | inspect file ownership and mode | `600 root:root`; no world-readable files | |
| SEC-03 | P1 | credential inventory is complete and accurate | compare inventory to active n8n credentials | no unknown credentials; owners/scopes present | |
| SEC-04 | P1 | least privilege validated for service accounts | test blocked operations for service accounts | blocked ops fail; allowed ops succeed | |

## 4. Workflow Governance and Change Control
| ID | Priority | Check | How to verify | Expected result | PASS/FAIL/NA + Evidence |
|---|---|---|---|---|---|
| WF-01 | P1 | workflow catalog exists and is current | review catalog for owner/purpose/classification | complete and current catalog | |
| WF-02 | P1 | workflow export hygiene enforced | export workflow and inspect output | no secrets; placeholders only | |
| WF-03 | P2 | separation of duties in high-risk flows | compare builders vs approvers | no single-point control | |

## 5. Logging, Monitoring, and Alerting
| ID | Priority | Check | How to verify | Expected result | PASS/FAIL/NA + Evidence |
|---|---|---|---|---|---|
| OBS-01 | P1 | health checks monitored | inspect monitoring target status | target up; alerts configured | |
| OBS-02 | P1 | admin action audit events recorded | perform controlled admin change; review logs | actor/timestamp recorded | |
| OBS-03 | P2 | alert routing tested | simulate workflow failure | alert delivered to ops recipients | |

## 6. Backup and Restore Readiness
| ID | Priority | Check | How to verify | Expected result | PASS/FAIL/NA + Evidence |
|---|---|---|---|---|---|
| BDR-01 | P1 | backups run successfully | review backup logs for n8n scope | recent successful backup present | |
| BDR-02 | P1 | restore test performed in lab | perform restore from backup set | service restored and validated | |
| BDR-03 | P2 | encryption key recovery validated | verify retrieval process under control policy | key material retrievable with dual control | |

## 7. Security Posture and Operational Readiness
| ID | Priority | Check | How to verify | Expected result | PASS/FAIL/NA + Evidence |
|---|---|---|---|---|---|
| OPS-01 | P1 | reboot resilience verified | reboot host and test service health | n8n healthy after reboot | |
| OPS-02 | P1 | admin access limited and reviewed | review admin membership and justifications | minimal, justified admin set | |
| OPS-03 | P2 | operator documentation complete | review runbook/escalation coverage | operators can support without admin intervention | |

## Evidence Pack (Attach to Rollout Ticket)
- completed checklist with PASS/FAIL and evidence references
- UFW allowlist proof and deny-test evidence
- SSO login and MFA enforcement evidence
- credential inventory and rotation schedule
- workflow catalog snapshot
- backup logs and restore test report
- monitoring status and alert-routing test evidence
